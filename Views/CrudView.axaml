<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:pr.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="pr.Views.CrudView"
             x:DataType="vm:CrudViewModel"
             Background="White">
  <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="5" Margin="10" Background="White">
    <Grid>
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
      </Grid.RowDefinitions>

      <!-- Title -->
      <TextBlock Text="{Binding TableTitle}" FontSize="24" HorizontalAlignment="Center" Grid.Row="0" Margin="10" Foreground="Black" />

      <!-- Data Grid -->
      <Border BorderBrush="LightGray" BorderThickness="1" Grid.Row="1" Margin="10" CornerRadius="3">
        <DataGrid ItemsSource="{Binding Items}" SelectedItem="{Binding SelectedItem}" AutoGenerateColumns="True" Foreground="Black" Background="White" />
      </Border>

      <!-- Buttons -->
      <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Grid.Row="2" Margin="10" Spacing="10">
        <Button Content="Tambah Baru" Command="{Binding AddNewCommand}" Foreground="Black" Background="LightGreen" BorderThickness="0" Padding="10" CornerRadius="3">
          <Button.Styles>
            <Style Selector="Button:pointerover">
              <Setter Property="Background" Value="LightSeaGreen" />
            </Style>
          </Button.Styles>
        </Button>
        <Button Content="Edit" Command="{Binding EditCommand}" CommandParameter="{Binding SelectedItem}" Foreground="Black" Background="LightBlue" BorderThickness="0" Padding="10" CornerRadius="3">
          <Button.Styles>
            <Style Selector="Button:pointerover">
              <Setter Property="Background" Value="LightSkyBlue" />
            </Style>
          </Button.Styles>
        </Button>
        <Button Content="Hapus" Command="{Binding DeleteCommand}" CommandParameter="{Binding SelectedItem}" Foreground="Black" Background="LightCoral" BorderThickness="0" Padding="10" CornerRadius="3">
          <Button.Styles>
            <Style Selector="Button:pointerover">
              <Setter Property="Background" Value="Red" />
            </Style>
          </Button.Styles>
        </Button>
        <Button Content="Simpan" Command="{Binding SaveCommand}" IsEnabled="{Binding IsEditing}" Foreground="Black" Background="LightGreen" BorderThickness="0" Padding="10" CornerRadius="3">
          <Button.Styles>
            <Style Selector="Button:pointerover">
              <Setter Property="Background" Value="LightSeaGreen" />
            </Style>
          </Button.Styles>
        </Button>
        <Button Content="Batal" Command="{Binding CancelCommand}" IsEnabled="{Binding IsEditing}" Foreground="Black" Background="LightGray" BorderThickness="0" Padding="10" CornerRadius="3">
          <Button.Styles>
            <Style Selector="Button:pointerover">
              <Setter Property="Background" Value="Gray" />
            </Style>
          </Button.Styles>
        </Button>
      </StackPanel>

      <!-- Edit Form (simple, dynamic would need more complex binding) -->
      <Border Background="LightBlue" IsVisible="{Binding IsEditing}" Grid.Row="1" Margin="10" BorderBrush="Blue" BorderThickness="1" CornerRadius="3">
        <StackPanel Margin="10" Spacing="5">
          <TextBlock Text="Edit Form (Dynamic fields would require custom controls)" Foreground="Black" />
          <!-- For simplicity, assume common fields; in production, use dynamic form generator -->
        </StackPanel>
      </Border>
    </Grid>
  </Border>
</UserControl>
